!function(o,e){var i=document,c={init:function(){var n=i.querySelector("#content .storeInfo");c.getAjaxModule(function(e){e({url:"/",data:{act:"getStoresInfo",adminAcount:o.sessionStorage.getItem("adminUser")},method:"get",error:function(e){console.log(e)},success:function(e){if("success"==(e=JSON.parse(e)).status){var o=e.data;0<o.length?(c.readerData(o,n),c.openSlogan()):c.openHintInfo()}else alert(e.msg)}})})},readerData:function(e,o){for(var n=i.createDocumentFragment(),t=0,l=e.length;t<l;t++){var r=i.createElement("li");r.innerHTML="<ul><li>"+e[t].userId+"</li><li>"+e[t].shopperName+"</li><li>"+e[t].booksNum+"</li><li>"+e[t].userName+"</li><li>"+e[t].tel+"</li><li>"+e[t].email+"</li><li>"+e[t].shopperTime+"</li><li>"+e[t].shopperDescribe+'</li><li><i class="iconfont icon-lajixiang"></i></li></ul>',n.appendChild(r)}o.appendChild(n)},openSearch:function(){var e=i.getElementById("search"),o=i.getElementById("search-box"),n=i.querySelector("#search-box .close"),t=i.getElementsByName("search-check")[0],l=i.getElementsByName("search-content")[0],r=i.querySelector("#search-box .storeInfo");e.onclick=function(){o.style.display="block"},n.onclick=function(){o.style.display="none"},l.onchange=function(){var e=i.querySelectorAll("#search-box .storeInfo>li");if(1<e.length)for(var o=1,n=e.length;o<n;o++)r.removeChild(e[o]);c.getAjaxModule(function(e){e({url:"/",data:{act:"serchStoreInfo",searchKey:t.value,searchValue:l.value},method:"get",error:function(e){console.log("err:"+e)},success:function(e){if(e=JSON.parse(e),console.log(e),"success"==e.status){var o=e.data;0==o.length&&c.openHintInfo(),c.readerData(o,r),c.openSlogan()}else alert("err："+e.msg)}})})}},openSlogan:function(){var o=i.querySelectorAll(".storeInfo>li:not(:nth-child(1))>ul li:nth-child(8)"),n=i.getElementById("storeDetail"),t=i.querySelector("#storeDetail p");oCloseSlogan=i.querySelector("#storeDetail .close");for(var e=0,l=o.length;e<l;e++)!function(e){o[e].onclick=function(){n.style.display="block",t.innerHTML=o[e].innerHTML}}(e);oCloseSlogan.onclick=function(){n.style.display="none"}},delStore:function(){for(var e=i.querySelectorAll(".storeInfo>li:not(:nth-child(1))>ul li:nth-child(9)"),n=i.querySelectorAll(".storeInfo>li:not(:nth-child(1))>ul li:nth-child(1)"),o=0,t=e.length;o<t;o++)!function(o){e[o].onclick=function(){confirm("确认删除该书店吗?")&&c.getAjaxModule(function(e){e({url:"/",data:{act:"delStore",storeId:n[o].innerHTML},method:"get",error:function(e){console.log(e)},success:function(e){e=JSON.parse(e),console.log(e)}})})}}(o)},getAjaxModule:function(o){seajs.use("ajax.js",function(e){o&&o(e)})},openHintInfo:function(){var e=i.getElementById("hintInfo");console.log(e),e.style.opacity=1;var o=setTimeout(function(){e.style.opacity=0,clearTimeout(o)},1500)}};c.init(),c.openSearch(),c.delStore(),c.getAjaxModule()}(window);