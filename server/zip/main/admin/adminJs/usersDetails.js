!function(d,e){var g=document,h={init:function(){var n=g.querySelector("#content .userInfo");this.getAjaxModule(function(e){e({url:"/",data:{act:"getUserDetailData",adminAcount:d.sessionStorage.getItem("adminUser")},method:"get",error:function(e){alert("error:"+e)},success:function(e){if(e=JSON.parse(e),console.log(e),"success"==e.status){var t=e.data;0==t.length?alert("没有对应的数据"):(h.readerUserData(t,n),h.openBookList())}else alert(e.msg)}})})},readerUserData:function(e,t){for(var n=g.createDocumentFragment(),o=0,l=e.length;o<l;o++){var r=g.createElement("li");r.innerHTML="<ul><li>"+e[o].userId+"</li><li>"+e[o].userName+"</li><li>"+e[o].tel+"</li><li>"+e[o].email+"</li><li>"+e[o].schoolName+"</li><li>"+e[o].registTime+"</li><li>"+e[o].loginTimes+"</li><li>"+e[o].userScore+"</li></ul>",n.appendChild(r)}t.appendChild(n),console.log()},readerBookLikeData:function(e,t,n){n.innerHTML=e.length;for(var o=g.createDocumentFragment(),l=0,r=e.length;l<r;l++){var i=g.createElement("li");i.innerHTML="<ul><li>"+e[l].bookName+"</li><li>"+e[l].bookPublic+"</li><li>"+e[l].bookPublic+"</li><li>"+e[l].bookPrice+"</li><li>"+e[l].bookAllNum+"</li><li>"+e[l].bookTime+"</li></ul>",o.appendChild(i)}t.appendChild(o)},readerStoreLikeData:function(e,t,n){n.innerHTML=e.length;for(var o=g.createDocumentFragment(),l=0,r=e.length;l<r;l++){var i=g.createElement("li");i.innerHTML="<ul><li>"+e[l].shopperName+"</li><li>"+e[l].shopperDescribe+"</li><li>"+e[l].booksNum+"</li><li>"+e[l].shopperTime+"</li></ul>",o.appendChild(i)}t.appendChild(o)},openSearch:function(){var e=g.getElementById("search"),t=g.getElementById("search-box"),n=t.getElementsByClassName("close")[0],o=g.getElementsByName("search-check")[0],l=g.getElementsByName("search-content")[0],r=g.querySelector("#search-box .userInfo");e.onclick=function(){t.style.display="block"},n.onclick=function(){t.style.display="none"},l.onchange=function(){var e=g.querySelectorAll("#search-box .userInfo>li");if(0<e.length)for(var t=1,n=e.length;t<n;t++)r.removeChild(e[t]);h.getAjaxModule(function(e){e({url:"/",data:{act:"searchUserInfo",searchKey:o.value,searchValue:l.value},method:"get",error:function(e){alert("error:"+e)},success:function(e){if("success"==(e=JSON.parse(e)).status){var t=e.data;0==t.length?h.openHintInfo():(h.readerUserData(t,r),h.openBookList())}else alert("err:"+e.msg);console.log(e)}})})}},openBookList:function(){for(var e=g.querySelectorAll(".userInfo>li:not(:nth-child(1))"),l=g.querySelectorAll(".userInfo>li:not(:nth-child(1))>ul li:nth-child(1)"),r=g.querySelectorAll(".userInfo>li:not(:nth-child(1))>ul li:nth-child(2)"),i=g.getElementById("book-list"),t=g.querySelector("#book-list .close"),s=g.querySelector(".userName .userId span"),a=g.querySelector(".userName .userNickName span"),c=g.querySelector("#book-list .userInfo"),u=g.querySelector("#book-list .head span"),n=0,o=e.length;n<o;n++)!function(o){e[o].onclick=function(){i.style.display="block";var e=c.querySelectorAll("#book-list .userInfo>li");if(1<e.length)for(var t=1,n=e.length;t<n;t++)c.removeChild(e[t]);u.innerHTML="0",s.innerHTML="",a.innerHTML="",h.getAjaxModule(function(e){e({url:"/",data:{act:"getBookLikes",adminAcount:d.sessionStorage.getItem("adminUser"),userId:l[o].innerHTML},method:"get",error:function(e){alert("err:"+e)},success:function(e){if(e=JSON.parse(e),console.log(e),"success"==e.status){var t=e.data;0==t.length?h.openHintInfo():(s.innerHTML=l[o].innerHTML,a.innerHTML=r[o].innerHTML,h.readerBookLikeData(t,c,u))}else alert("err:"+err)}})})}}(n);t.onclick=function(){i.style.display="none"}},openStoreList:function(){var e=g.querySelector("#book-list .head i"),o=g.querySelector("#book-list .userName .userId span"),l=g.getElementById("stores-list"),t=g.querySelector("#stores-list .close"),r=g.querySelector("#stores-list .userInfo"),i=g.querySelector("#stores-list .head span");e.onclick=function(){l.style.display="block";var e=r.getElementsByTagName("li");if(1<e.lenghth)for(var t=1,n=e.length;t<n;t++)r.removeChild(e[t]);i.innerHTML="0",h.getAjaxModule(function(e){e({url:"/",data:{act:"getStoreLikes",adminAcount:d.sessionStorage.getItem("adminUser"),userId:o.innerHTML},method:"get",error:function(e){alert("error:"+e)},success:function(e){if(e=JSON.parse(e),console.log(e),"success"==e.status){var t=e.data;0==t.length?h.openHintInfo():h.readerStoreLikeData(t,r,i)}else alert("err:"+e.msg)}})})},t.onclick=function(){l.style.display="none"}},openLoginStatus:function(){for(var e=g.querySelectorAll(".userInfo>li:not(:nth-child(1))>ul li:nth-child(7)"),t=g.getElementById("login-status"),n=g.querySelector("#login-status .close"),o=0,l=e.length;o<l;o++)e[o].onclick=function(e){(e=e||d.e).stopPropagation?e.stopPropagation():e.cancelBubble=!0,t.style.display="block"};n.onclick=function(){t.style.display="none"}},getAjaxModule:function(t){seajs.use("ajax.js",function(e){t&&t(e)})},openHintInfo:function(){var e=g.getElementById("hintInfo");console.log(e),e.style.opacity=1;var t=setTimeout(function(){e.style.opacity=0,clearTimeout(t)},1500)}};h.init(),h.openSearch(),h.openStoreList(),h.openLoginStatus()}(window);