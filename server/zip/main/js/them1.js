!function(t,o){var n,i=o;function r(){this.init(),this.controlHeaderShadow(),this.logo(),this.collectBook()}Object.defineProperty(r.prototype,"constructor",{enumerable:!1,value:r}),r.prototype={controlHeaderShadow:function(){var e=i.getElementById("header");t.onscroll=function(){200<o.documentElement.scrollTop?e.style.boxShadow="0 0 10px #ccc":e.style.boxShadow="0 0 0 transparent"}},init:function(){var o=t.location.search.split("?")[1].split("=")[1],c=i.querySelector("#header h1"),a=i.getElementsByClassName("bookUl")[0];a.getElementsByTagName("li"),a.getElementsByTagName("a"),a.getElementsByTagName("img"),a.getElementsByClassName("book-name"),a.getElementsByClassName("book-describe"),a.getElementsByClassName("book-public"),a.getElementsByClassName("book-allNum"),a.getElementsByClassName("book-price");this.getAjaxModule(function(e){e({url:"/",data:{act:"getOneAllStoreBooks",shopperId:o},method:"get",error:function(e){console.log("err:"+e)},success:function(e){if(e=JSON.parse(e),console.log(e),"success"==e.status){var o=e.data;if(c.innerHTML=e.shopperInfo.shopperName+" ("+e.shopperInfo.schoolName+")",0<o.length){for(var t=i.createDocumentFragment(),l=0,n=o.length;l<n;l++){var s=i.createElement("li");s.className="transfrom-speedup",s.innerHTML='<a href="detail.html?bookId='+o[l].bookId+'" target="blank"><div class="img"><img src="imgs/storeImg/'+o[l].bookSrc+'"></div></a><i class="iconfont icon-heart-fill"></i><h3 class="book-name">'+o[l].bookName+'</h3><p class="book-describe">'+o[l].bookDescribe+'</p><p class="book-public">'+o[l].bookPublic+'</p><p>库存：<span class="book-allNum">'+o[l].bookAllNum+'</span>本</p><p>单价：￥<span class="book-price">'+o[l].bookPrice+"</span></p>",t.appendChild(s)}a.appendChild(t)}r.prototype.ClickcollectBook()}else r.prototype.getNoBooksInfo()}})})},ClickcollectBook:function(){for(var l=i.getElementsByClassName("icon-heart-fill"),e=i.querySelectorAll(".bookUl a"),o=0,t=l.length;o<t;o++)!function(o){var t=e[o].href.split("?")[1].split("=")[1];l[o].onclick=function(){r.prototype.getCookieModule(function(e){e.get("user")?(n=JSON.parse(e.get("user")),l[o].style.color="#900",r.prototype.getAjaxModule(function(e){e({url:"/",data:{act:"collectBook",userId:n.userId,bookId:t},method:"get",error:function(e){console.log("err:"+e)},success:function(e){e=JSON.parse(e),console.log(e),r.prototype.getLikeInfo()}})})):confirm("登陆后才能保存收藏，您还没登录，登录吗？")&&(i.getElementById("regitLog").style.display="block",i.getElementsByClassName("login")[0].style.display="block")})}}(o)},logo:function(){i.getElementById("logo").onclick=function(){console.log(1),t.location.href="index.html"}},getNoBooksInfo:function(){var e=i.getElementById("noBooksInfo");e.style.opacity="1";var o=setTimeout(function(){e.style.opacity="0",clearTimeout(o)},1500)},getLikeInfo:function(){var e=i.getElementById("likeInfo");e.style.opacity="0.8";setTimeout(function(){e.style.opacity="0"},1e3)},collectBook:function(){seajs.use("collects.js",function(e){e()})},getAjaxModule:function(o){seajs.use("ajax.js",function(e){o&&o(e)})},getCookieModule:function(o){seajs.use("cookie.js",function(e){o&&o(e)})}};new r}(window,document);